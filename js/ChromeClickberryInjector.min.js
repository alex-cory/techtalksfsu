function Clickberry(){var k="PROD";var a="standalone";var m=location.href;function p(u){try{var v=document.getElementById(u);var A=v.src.toString().split("?");var w=A[A.length-1];w=w.split("&");var y={};for(var x=w.length-1;x>=0;x--){var B=w[x].split("=");y[B[0]]=B[1]}}catch(z){}return y}var c=function(x,C){var v=C||"";var w=Object.prototype.toString.call(x)==="[object Array]"?true:false;var B=w?("Array\n"+v+"[\n"):("Object\n"+v+"{\n");for(var u in x){if(x.hasOwnProperty(u)){var z=x[u];var y="";var A=Object.prototype.toString.call(z);switch(A){case"[object Array]":case"[object Object]":y=c(z,(v+"\t"));break;case"[object String]":y="'"+z+"'";break;default:y=z}B+=v+"\t"+u+" => "+y+",\n"}}B=B.substring(0,B.length-2)+"\n"+v;return w?(B+"]"):(B+"}")};function b(B){console.log("Parametr: "+B);var A=window.document.URL.toString();if(A.indexOf("?")>0){var w=A.split("?");var z=w[1].split("&");var u=new Array(z.length);var x=new Array(z.length);var y=0;for(y=0;y<z.length;y++){var v=z[y].split("=");u[y]=v[0];if(v[1]!=""){x[y]=unescape(v[1])}else{x[y]=null}}for(y=0;y<z.length;y++){if(u[y]==B){return x[y]}}return false}}var r=function(u){while(child=u.firstChild){u.removeChild(child)}};var s=function(w){var v=0,u=0;while(w){u+=w.offsetLeft;v+=w.offsetTop;w=w.offsetParent}return[u,v]};var n=function(z){if(!z){z="windowChanges"}var C=window.pageXOffset||document.documentElement.scrollLeft;var B=window.pageYOffset||document.documentElement.scrollTop;var y=document.getElementsByTagName("iframe");for(var v in y){if(y[v].getAttribute&&(y[v].getAttribute("wndID")||(y[v].getAttribute("name")&&y[v].getAttribute("name").toString().indexOf("cbplayer")>=0))){var A=s(y[v]);var x=y[v].getAttribute("wndID");var w=y[v].contentWindow;var u=y[v].width;var D=y[v].height;w.postMessage({type:z,scrollX:C,scrollY:B,left:A[0],top:A[1],width:u,height:D,wndID:x},"*")}}};var t=function(){var v=document.getElementById("watch7-player");var x=document.getElementById("player-api");if(x){x.style["z-index"]=1000}if(!v){var u=document.getElementById("movie_player");if(u){v=u.parentNode}}if(v){var w=location.href;if(ytplayer.config.args.allow_embed){i(v,w,1)}}};var g=function(){var z=document.getElementsByTagName("iframe");for(var u in z){var B=z[u].src;if(B&&((B.indexOf("youtube.com/embed")>0&&B.indexOf("youtube.com/embed")<20)||(B.indexOf("youtube-nocookie.com/embed")>0&&B.indexOf("youtube.com/embed")<20))){var y=document.createElement("span");y.style.width=z[u].width+"px";y.style.height=z[u].height+"px";y.style.display="block";y.width=z[u].width;y.height=z[u].height;z[u].parentNode.insertBefore(y,z[u]);z[u].parentNode.removeChild(z[u]);i(y,B,0);g();return}}var A=document.getElementsByTagName("param");for(var w in A){var v=A[w].name;var B=A[w].value;if((v==="movie")&&B&&((B.indexOf("youtube.com/v")>0&&B.indexOf("youtube.com/v")<20)||(B.indexOf("youtube-nocookie.com/v")>0&&B.indexOf("youtube.com/v")<20))){var x=A[w].parentNode;var y=document.createElement("span");y.style.width=x.width+"px";y.style.height=x.height+"px";y.style.display="block";y.width=x.width;y.height=x.height;x.parentNode.insertBefore(y,x);x.parentNode.removeChild(x);i(y,B,0);g();return}}};var i=function(w,D,A){w.id=w.id+"_";var x=w.offsetWidth;var F=w.offsetHeight;var C=s(w);var y=C[0];var B=C[1];var z="clickberry_tagger_"+Math.round(Math.random()*1000);var v="https://clickberry.tv/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(D)+"&width="+x+"&height="+F+"&left="+y+"&top="+B+"&wndID="+z+"&autoPlay="+A+"&acsNamespace=clickberry&addonType="+a;if(k==="QA"){v="https://qa.clickberry.tv/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(D)+"&width="+x+"&height="+F+"&left="+y+"&top="+B+"&wndID="+z+"&autoPlay="+A+"&acsNamespace=clickqa&addonType="+a}if(k==="local"){v="https://local.clickberry.tv:444/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(D)+"&width="+x+"&height="+F+"&left="+y+"&top="+B+"&wndID="+z+"&autoPlay="+A+"&acsNamespace=clicklocal&addonType="+a}if(k==="dev"){v="https://dev.clickberry.tv/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(D)+"&width="+x+"&height="+F+"&left="+y+"&top="+B+"&wndID="+z+"&autoPlay="+A+"&acsNamespace=clickdev&addonType="+a}var u='<iframe src="'+v+'" width="'+x+'" height="'+F+'" wndID="'+z+'" id="'+z+'" name="'+z+'" frameborder="0" allowfullscreen></iframe>';var G=location.href;if(G.toString().indexOf("youtube.com")>0||G.toString().indexOf("youtu.be")>0){u='<iframe src="'+v+'" width="100%" height="100%" wndID="'+z+'" id="'+z+'" name="'+z+'" frameborder="0" allowfullscreen></iframe>'}var E=document.getElementById("movie_player");if(E){if(typeof E.stopVideo==="function"){E.stopVideo()}else{}}r(w);w.innerHTML=u;window.onscroll=function(){n()};window.onresize=function(H){n()};setTimeout(function(){var H=document.getElementById(z);if(!H){i(w,D,A)}else{}},"2000")};var d=function(){var u=p("clickberry-imageshack-script");if(u.v&&u.v==="QA"){k="QA"}if(u.v&&u.v==="local"){k="local"}if(u.addonType&&u.addonType==="imageshack"){a="imageshack"}else{a="standalone"}window.addEventListener("message",function(v){if(v.data.type==="checkExtension"){console.log("cheching extension query");window.postMessage({type:"checkExtensionResult"},"*")}});t();g()};function l(u,x,v){var y=new Date();y.setDate(y.getDate()+v);var w=escape(x)+((v==null)?"":"; expires="+y.toUTCString());document.cookie=u+"="+w}function q(v){var w=document.cookie;var x=w.indexOf(" "+v+"=");if(x==-1){x=w.indexOf(v+"=")}if(x==-1){w=null}else{x=w.indexOf("=",x)+1;var u=w.indexOf(";",x);if(u==-1){u=w.length}w=unescape(w.substring(x,u))}return w}function e(){try{var u=document.getElementsByTagName("body")[0];var v=document.createElement("div");v.width="100%";v.height="45";v.style.width="100%";v.style.height="50px";v.style.position="fixed";v.style["z-index"]="1000000";v.style.top="0";v.style["background-image"]="url('http://click-berry.net/misc/images/n/YT_Back.jpg')";v.style["background-position"]="center";v.style["background-color"]="black";v.style["background-repeat"]="no-repeat";u.appendChild(v)}catch(w){console.log("Error to create popup")}}var o=b("v");if(o){var f=q("promoExtension");if(localStorage.promoExtension===true||f==="clickberry"){e()}}var h=b("tagger");console.log("tagger: "+h);if(h){localStorage.promoExtension=true;l("promoExtension","clickberry",1)}window.addEventListener("message",function(u){if(u.data.type&&u.data.type==="getPageParams"){n("returnPageParams")}if(u.data.type==="returnClickberryState"){if(u.data.state==="true"){d()}}if(u.data.type==="tagSharedEvent"){console.log("Shared event");var v=q("promoExtension");if(localStorage.promoExtension===true||v==="clickberry"){localStorage.promoExtension=false;l("promoExtension","",0);window.close()}}});window.postMessage({type:"getClickberryState"},"*");var j=function(){var u=new Object();u.tempOpen=XMLHttpRequest.prototype.open;u.tempSend=XMLHttpRequest.prototype.send;u.callback=function(){var v=0;var w=setInterval(function(){v++;if(m!==location.href){clearInterval(w);m=location.href;var y=document.getElementsByTagName("iframe");for(var x in y){if(y[x].getAttribute&&y[x].getAttribute("wndID")){y[x].contentWindow.postMessage({type:"VideoChanged",url:m},"*")}}}if(v>=10){clearInterval(w)}},500)};XMLHttpRequest.prototype.open=function(w,v){if(!w){var w=""}if(!v){var v=""}u.tempOpen.apply(this,arguments);u.method=w;u.url=v;u.obj=this;if(w.toLowerCase()==="get"){u.data=v.split("?");u.data=u.data[1]}};XMLHttpRequest.prototype.send=function(w,v){if(!w){var w=""}if(!v){var v=""}u.tempSend.apply(this,arguments);if(u.method.toLowerCase()==="post"){u.data=w}u.callback()}};j()}Clickberry();